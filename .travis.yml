language: java
cache:
  directories:
    - "$HOME/.m2"
    - "$HOME/.sonar/cache"
env:
  global:
    # The next declaration is the encrypted COVERITY_SCAN_TOKEN, created
    # via the "travis encrypt" command using the project repo's public key.
    - secure: O_cda5pWDBAP-O3_0nG5RQ
jobs:
  include:
    - stage: test
      name: Linux + Oracle JDK 11
      os: linux
      dist: xenial
      sudo: required
      jdk: openjdk11
      install: true
      script: dev/main
      before_install: dev/before_install
      before_script: env
    - stage: test
      name: MacOSX + Oracle JDK 11
      os: osx
      osx_image: xcode10.1
      jdk: oraclejdk11
      install: true
      script: dev/main
      before_install: dev/before_install
      before_script: env
